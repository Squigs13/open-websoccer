<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE module SYSTEM "../module.dtd">
<module version="1.0.0">

    <dependencies>
        <dependency module="clubs" version="1.0.0"/>
    </dependencies>
    
    <admin>
        <adminpage
            id="sponsor"
            entity="sponsor"
            navcategory="league"
            permissionrole="r_data" >

            <entity dbtable="sponsor AS SponsorTab" >

                <overview delete="true" edit="true" >

                    <column
                        id="entity_sponsor_name"
                        field="SponsorTab.name"
                        type="text"
                        sort="true"
                        filter="true" />
                    
                    <column
                        id="entity_sponsor_league_id"
                        field="LeagueTab.name"
                        type="text"
                        sort="true"
                        filter="true" />
                    
                    <column
                        id="entity_sponsor_min_place"
                        field="SponsorTab.min_place"
                        type="number"
                        sort="true" />
                    
                    <column
                        id="entity_sponsor_max_teams"
                        field="SponsorTab.max_teams"
                        type="number"
                        sort="true" />
                    
                    
                	<join type="LEFT" jointable="league AS LeagueTab" joincondition="SponsorTab.league_id = LeagueTab.id" />
                </overview>

                <editform>
                    <field id="name" type="text" required="true" />
                    <field id="league_id" type="foreign_key" entity="league" jointable="league" cascade="delete" labelcolumns="country, name" required="true" />
					
					<field id="b_match" type="number" required="true" />
					<field id="b_home_match" type="number" required="true" />
					<field id="b_win" type="number" required="true" />
					<field id="b_championship" type="number" required="true" />
					<field id="max_teams" type="number" required="true" />
					<field id="min_place" type="number" required="true" />
					<field id="image" type="file" />
					
                </editform>
            </entity>
        </adminpage>
    </admin>
    
  <settings>
      <setting id="sponsor_matches" category="game" type="number" default="15" />
      <setting id="sponsor_earliest_matchday" category="game" type="number" default="4" />
  </settings>
  
  <actions>
	<action id="choose-sponsor" controller="ChooseSponsorController" role="user">
	    <param id="id" type="number" required="true" min="1" max="2000000000" />
	</action>
	
  </actions>
    
    <pages>
        <page
            id="sponsor"
            template="sponsor"
            model="SponsorModel"
            parentItem="office"
            navitem="true"
            navweight="5"
            role="user">
        </page>

    </pages>
    
</module>